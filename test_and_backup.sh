#!/bin/bash

# working dir 
PROJECT_DIR="/home/carva014/Work/Code/FAO/GloSIS"      # << EDIT THIS LINE!

# date
DATE=`date +%Y-%m-%d_%H-%M`


####################
#  MapServer       #
####################

# Test raster WMS
# GetCapabilities
http://localhost:8004/?map=/etc/mapserver/PH-GSAS-ECX-2020-0-30.map&SERVICE=WMS&REQUEST=GetCapabilities
# GetMap
http://localhost:8004/?map=/etc/mapserver/PH-GSAS-ECX-2020-0-30.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=4.584249999999999936%2C116.5172270000000054%2C21.22970700000000122%2C126.8480870000000067&CRS=EPSG%3A4326&WIDTH=567&HEIGHT=914&LAYERS=PH-GSAS-ECX-2020-0-30&STYLES=&FORMAT=image%2Fpng&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi%3A96&TRANSPARENT=TRUE
# GetLegendGraphic
http://localhost:8004/?map=/etc/mapserver/PH-GSAS-ECX-2020-0-30.map&SERVICE=WMS&VERSION=1.1.1&LAYER=PH-GSAS-ECX-2020-0-30&REQUEST=getlegendgraphic&FORMAT=image/png
# GetFeatureInfo
http://localhost:8004/?map=/etc/mapserver/PH-GSAS-ECX-2020-30-100.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=1.16625995882351496%2C116.25895549999999901%2C24.6476970411764853%2C127.10635850000001312&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1288&LAYERS=PH-GSAS-ECX-2020-30-100&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=PH-GSAS-ECX-2020-30-100&INFO_FORMAT=text%2Fhtml&I=282&J=429
http://localhost:8004/?map=/etc/mapserver/PH-GSAS-ECX-2020-0-30.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=1.16625995882351496%2C116.25895549999999901%2C24.6476970411764853%2C127.10635850000001312&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1288&LAYERS=PH-GSAS-ECX-2020-0-30&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=PH-GSAS-ECX-2020-0-30&INFO_FORMAT=geojson&I=282&J=429
# QGIS add WMS layer
http://localhost:8004/?map=/etc/mapserver/PH-GSAS-ECX-2020-0-30.map

# Test profiles WMS
# GetCapabilities
http://localhost:8004/?map=/etc/mapserver/PH-random_points.map&SERVICE=WMS&REQUEST=GetCapabilities
# GetMap
http://localhost:8004?map=/etc/mapserver/PH-random_points.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=1.166260000000000074%2C116.6146860695027954%2C23.85647567931255963%2C127.1063589999999976&CRS=EPSG%3A4326&WIDTH=549&HEIGHT=1186&LAYERS=PH-random_points&STYLES=&FORMAT=image%2Fpng&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi%3A96&TRANSPARENT=TRUE
# GetLegendGraphic
http://localhost:8004/?map=/etc/mapserver/PH-random_points.map&SERVICE=WMS&VERSION=1.1.1&LAYER=PH-random_points&REQUEST=getlegendgraphic&FORMAT=image/png
# GetFeatureInfo
http://localhost:8004/?map=/etc/mapserver/PH-random_points.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=1.16625995882351496%2C116.25895549999999901%2C24.6476970411764853%2C127.10635850000001312&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1288&LAYERS=PH-random_points&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=PH-random_points&INFO_FORMAT=text%2Fhtml&I=282&J=429
# QGIS add WMS layer
http://localhost:8004/?map=/etc/mapserver/PH-random_points.map


# Test raster WMS
# GetCapabilities
http://localhost:8004/?map=/etc/mapserver/BT-GSNM-BASAT-2024-0-30-MEAN.map&SERVICE=WMS&REQUEST=GetCapabilities
# GetMap
http://localhost:8004?map=/etc/mapserver/BT-GSNM-BASAT-2024-0-30-MEAN.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=26.69988199999999878%2C88.74999900000000252%2C28.24941499999999905%2C92.12528600000000267&CRS=EPSG%3A4326&WIDTH=661&HEIGHT=304&LAYERS=BT-GSNM-BASAT-2024-0-30-MEAN&STYLES=&FORMAT=image%2Fpng&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi%3A96&TRANSPARENT=TRUE
# GetLegendGraphic
http://localhost:8004/?map=/etc/mapserver/BT-GSNM-BASAT-2024-0-30-MEAN.map&SERVICE=WMS&VERSION=1.1.1&LAYER=BT-GSNM-BASAT-2024-0-30-MEAN&REQUEST=getlegendgraphic&FORMAT=image/png
# GetFeatureInfo
http://localhost:8004/?map=/etc/mapserver/BT-GSNM-BASAT-2024-0-30-MEAN.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=25.09660538636364535%2C88.66561682500001496%2C29.85269161363635604%2C92.20966817500000445&CRS=EPSG%3A4326&WIDTH=693&HEIGHT=930&LAYERS=BT-GSNM-BASAT-2024-0-30-MEAN&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=BT-GSNM-BASAT-2024-0-30-MEAN&INFO_FORMAT=text%2Fhtml&I=383&J=476&FEATURE_COUNT=1

# Test profiles WMS
# GetCapabilities
http://localhost:8004/?map=/etc/mapserver/Profiles.map&SERVICE=WMS&REQUEST=GetCapabilities
# GetMap
http://localhost:8004?map=/etc/mapserver/Profiles.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=26.69988199999999878%2C88.74999900000000252%2C28.24941499999999905%2C92.12528600000000267&CRS=EPSG%3A4326&WIDTH=661&HEIGHT=304&LAYERS=Profiles&STYLES=&FORMAT=image%2Fpng&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi%3A96&TRANSPARENT=TRUE
# GetLegendGraphic
http://localhost:8004/?map=/etc/mapserver/Profiles.map&SERVICE=WMS&VERSION=1.1.1&LAYER=Profiles&REQUEST=getlegendgraphic&FORMAT=image/png
# GetFeatureInfo
http://localhost:8004/?map=/etc/mapserver/Profiles.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=1.16625995882351496%2C116.25895549999999901%2C24.6476970411764853%2C127.10635850000001312&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1288&LAYERS=Profiles&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=Profiles&INFO_FORMAT=text%2Fhtml&I=282&J=429


# Test VRT WMS
# VRT GetMap
http://localhost:8004?map=/etc/mapserver/PH-GSOC.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=11.50360938260532961%2C119.4691787884444949%2C17.66748659510531283%2C122.84315021570988335&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1087&LAYERS=PH-GSOC&STYLES=&FORMAT=image%2Fpng&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi%3A96&TRANSPARENT=TRUE
# VRT GetFeatureInfo
http://localhost:8004/?map=/etc/mapserver/PH-GSAS.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=11.50360938260532961%2C119.4691787884444949%2C17.66748659510531283%2C122.84315021570988335&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1087&LAYERS=PH-GSAS&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=PH-GSAS&INFO_FORMAT=text%2Fhtml&I=244&J=358
http://localhost:8004/?map=/etc/mapserver/PH-GSNM.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=11.50360938260532961%2C119.4691787884444949%2C17.66748659510531283%2C122.84315021570988335&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1087&LAYERS=PH-GSNM&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=PH-GSNM&INFO_FORMAT=text%2Fhtml&I=244&J=358
http://localhost:8004/?map=/etc/mapserver/PH-GSOC.map&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX=11.50360938260532961%2C119.4691787884444949%2C17.66748659510531283%2C122.84315021570988335&CRS=EPSG%3A4326&WIDTH=595&HEIGHT=1087&LAYERS=PH-GSOC&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=PH-GSOC&INFO_FORMAT=text%2Fhtml&I=244&J=358


###########################
#  PostgreSQL (db) backup #
###########################

pg_dump -h localhost -p 5442 -U sis -d sis -Fc -v -f $PROJECT_DIR/sis-database/backups/sis_database_backup_${DATE}.backup
